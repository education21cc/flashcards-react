{"version":3,"sources":["data/Card.ts","images/icons/forward-24px.svg","instructionPages/swiggy/Instruction.tsx"],"names":["CardType","_style","_path","_path2","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgForward24Px","_ref","svgRef","title","titleId","props","id","xmlns","xmlnsXlink","x","y","width","height","viewBox","style","enableBackground","xmlSpace","ref","type","className","d","ForwardRef","card","Normal","Instruction","onNextPage","containerRef","useRef","tooltipRef","useState","step","setStep","translations","useTranslationStore","instructions","useMemo","duration","elementSelector","text","getTextRaw","placement","useEffect","timeout","instruction","current","querySelector","content","innerHTML","createPopper","modifiers","name","options","offset","setTimeout","clearTimeout","display","cardOnBack","onClick","isFlipped","flipDirection","flipSpeedFrontToBack","undefined","flipSpeedBackToFront","CardFace","side","ButtonBar","onLeftClick","onRightClick","onFlip","enableLeftAndRight","onPlay","getText","role","data-popper-arrow"],"mappings":"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","file":"static/js/0.6759b5fb.chunk.js","sourcesContent":["export enum CardType {\n  Intro,\n  Normal,\n  Outro\n}\n\nexport interface Card {\n  type: CardType;\n  id?: string;   // preferred way to set content of front. find content in translation file\n\n  image?: string;\n  frontText?: string;\n  text?: string;\n  subtext1?: string;\n  subtext2?: string;\n}\n","var _style, _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgForward24Px(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"145px\",\n    height: \"145px\",\n    viewBox: \"0 0 145 145\",\n    style: {\n      enableBackground: \"new 0 0 145 145\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _style || (_style = /*#__PURE__*/React.createElement(\"style\", {\n    type: \"text/css\"\n  }, \"\\n\\t.st0{fill:none;stroke:#6EE94A;stroke-width:10.56;stroke-linecap:round;stroke-miterlimit:10;}\\n\")), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M80.4,37.3l29.9,29.8c3.8,3.8,3.8,9.9,0,13.7l-29.9,29.7\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M46.4,37.3l29.9,29.8c3.8,3.8,3.8,9.9,0,13.7l-29.9,29.7\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgForward24Px);\nexport default __webpack_public_path__ + \"static/media/forward-24px.1599a31f.svg\";\nexport { ForwardRef as ReactComponent };","import CardFace from \"App/FlashCard/cards/CardNormal/CardFace\"\nimport { CardType } from \"data/Card\"\nimport { createPopper, Placement } from '@popperjs/core';\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { ButtonBarIntro, ButtonBarNormal } from \"App/ButtonBar\";\nimport ReactCardFlip from \"react-card-flip\";\nimport { useTranslationStore } from \"stores/translations\";\nimport ReactMarkdown from \"react-markdown\";\nimport { ReactComponent as NextIcon } from './../../images/icons/forward-24px.svg';\nimport './styles/instruction.scss';\n\n\n\nconst card = {\n  type: CardType.Normal,\n  id: 'demo'\n}\n\ntype Props = {\n  onNextPage: () => void\n  onPreviousPage: () => void\n}\n\n// Instructions componment for the swiggy project\nconst Instruction = (props: Props) => {\n  const { onNextPage } = props;\n  const containerRef = useRef<HTMLDivElement>(null)\n  const tooltipRef = useRef<HTMLDivElement>(null)\n  const [step, setStep] = useState(0)\n  const translations = useTranslationStore();\n\n  const instructions = useMemo(() => ([{\n    duration: 10000,\n    elementSelector: '.flash-card-wrapper p',\n    text: translations.getTextRaw(\"instructions-text1\"),\n  }, {\n    duration: 10000,\n    elementSelector: '.button-bar button',\n    text: translations.getTextRaw(\"instructions-text2\")\n  }, {\n    duration: 10000,\n    elementSelector: '.flash-card-wrapper p button',\n    text: translations.getTextRaw(\"instructions-text3\"),\n    placement: 'bottom' as Placement\n  }, {\n    duration: 10000,\n    elementSelector: '.button-bar .button-right',\n    text: translations.getTextRaw(\"instructions-text4\")\n  }, {\n    duration: 10000,\n    elementSelector: '.button-bar .button-left',\n    text: translations.getTextRaw(\"instructions-text5\")\n  }]), [translations])\n\n  useEffect(() => {\n    let timeout:  NodeJS.Timeout\n    const instruction = instructions[step]\n    if (!instruction && tooltipRef.current) {\n      tooltipRef.current.style.display = 'none'\n      return\n    }\n    const source = containerRef.current?.querySelector(instruction.elementSelector)\n    if (!source || !tooltipRef.current) return\n    const content = tooltipRef.current.querySelector('.content')\n    if (!content) return\n    content.innerHTML = instruction.text\n    createPopper(source, tooltipRef.current, {\n      placement: instruction.placement ?? 'top',\n      modifiers: [{\n        name: 'offset',\n        options: {\n          offset: [0, 8],\n        },\n      }],\n    });\n\n    timeout = setTimeout(() => {\n      if (step < instructions.length) {\n        setStep(step + 1)\n      }\n    }, instruction.duration)\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [instructions, step])\n\n  const cardOnBack = step > 1\n\n  const handleClick = () => {\n    if (step < instructions.length) {\n      setStep(step + 1)\n    }\n  }\n  return (\n    <div ref={containerRef} onClick={handleClick}>\n      { step < 5 && (\n        <>\n          <div className=\"card-container\">\n            <div className=\"flash-card-wrapper\">\n              <ReactCardFlip\n                isFlipped={!cardOnBack}\n                flipDirection=\"horizontal\"\n                flipSpeedFrontToBack={undefined}\n                flipSpeedBackToFront={undefined}\n              >\n                <CardFace side=\"front\" card={card} />\n                <CardFace side=\"back\" card={card} />\n              </ReactCardFlip>\n            </div>\n          </div>\n          <ButtonBarNormal\n            onLeftClick={() => undefined}\n            onRightClick={() => undefined}\n            onFlip={() => undefined}\n            enableLeftAndRight={cardOnBack}\n          />\n        </>\n      )}\n      { step === 5 && (\n        <>\n          <div className=\"card-container\">\n            <div className=\"flash-card-wrapper\">\n              <CardFace side=\"front\" card={{ type: CardType.Normal }}>\n                <ReactMarkdown>\n                  {translations.getTextRaw(\"instructions-text6\")}\n                </ReactMarkdown>\n              </CardFace>\n            </div>\n          </div>\n          <ButtonBarIntro\n            onPlay={onNextPage}\n          />\n        </>\n      )}\n      { step !== 5 && (\n        <button onClick={onNextPage} className=\"button-text button-next\" >\n          <span>\n            {translations.getText(\"instructions-skip\")}\n          </span>\n          <NextIcon />\n        </button>\n      )}\n      <div className=\"tooltip\" ref={tooltipRef} role=\"tooltip\">\n        <div className=\"content\"></div>\n        <div className=\"arrow\" data-popper-arrow></div>\n      </div>\n    </div>\n  )\n}\n\nexport default Instruction\n"],"sourceRoot":""}